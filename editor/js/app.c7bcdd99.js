(function(t){function e(e){for(var a,o,i=e[0],l=e[1],c=e[2],u=0,f=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var l=n[i];0!==s[l]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/editor/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),s=n.n(a);s.a},"480c":function(t,e,n){"use strict";var a=n("a180"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("navbar"),n("transition",{attrs:{name:"slide"}},[n("keep-alive",{attrs:{include:"Home"}},[n("router-view")],1)],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-toolbar",[n("v-toolbar-title",{staticClass:"title"},[n("router-link",{staticClass:"primary--text text-decoration-none",attrs:{to:"/"}},[t._v(" Varnam Editor ")])],1),n("v-spacer"),n("v-row",{staticClass:"d-inline-flex",attrs:{align:"center",justify:"end"}},[n("v-col",{attrs:{lg:"2",sm:"6"}},[n("v-select",{attrs:{items:t.langs,"hide-details":!0,label:"Language",outlined:"",dense:""},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}})],1),n("v-col",{attrs:{lg:"2",sm:"4"}},["Home"==t.$route.name?n("div",[n("v-btn",{attrs:{to:"/settings",color:"primary",depressed:""}},[n("v-icon",[t._v("mdi-cog")]),t._v(" Settings ")],1)],1):n("div",[n("v-btn",{attrs:{to:"/",color:"primary",depressed:""}},[n("v-icon",[t._v("mdi-arrow-left")]),t._v(" Back ")],1)],1)])],1)],1)],1)},i=[],l=(n("4160"),n("159b"),{name:"Navbar",data:function(){return{}},computed:{langs:function(){var t=[];return this.$store.state.langs.forEach((function(e){t.push({text:e.DisplayName,value:e.Identifier})})),t},lang:{get:function(){return this.$store.state.settings.lang},set:function(t){this.$store.commit("updateSettings",{lang:t})}}}}),c=l,d=n("2877"),u=n("6544"),f=n.n(u),g=n("8336"),v=n("62ad"),p=n("132d"),h=n("0fd9"),m=n("b974"),b=n("2fa4"),y=n("71d9"),w=n("2a7f"),_=Object(d["a"])(c,o,i,!1,null,null,null),k=_.exports;f()(_,{VBtn:g["a"],VCol:v["a"],VIcon:p["a"],VRow:h["a"],VSelect:m["a"],VSpacer:b["a"],VToolbar:y["a"],VToolbarTitle:w["a"]});var x={name:"App",components:{Navbar:k},data:function(){return{}}},S=x,V=(n("034f"),n("7496")),A=Object(d["a"])(S,s,r,!1,null,null,null),C=A.exports;f()(A,{VApp:V["a"]});var T,$=n("8c4f"),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("v-container",{staticClass:"main"},["right"===t.$store.state.settings.suggestionsPanelPosition?n("div",[n("v-row",[n("v-col",{staticClass:"editor",attrs:{cols:"6",sm:"9"}},[n("Editor")],1),n("v-col",{staticClass:"panel",attrs:{cols:"6",sm:"3"}},[n("SuggestionsPanel")],1)],1)],1):n("div",[n("v-row",{attrs:{dense:""}},[n("v-col",{staticClass:"panel",attrs:{cols:"6",sm:"3"}},[n("SuggestionsPanel")],1),n("v-col",{staticClass:"editor",attrs:{cols:"6",sm:"9"}},[n("Editor")],1)],1)],1)])],1)},W=[],R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"textarea"},[n("v-textarea",{ref:"editor",style:"font-size: "+t.$store.state.settings.fontSize+"px",attrs:{outlined:"",name:"translate",label:"Type here...",rows:"20",autofocus:!0},model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}}),n("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.setupDialog,callback:function(e){t.setupDialog=e},expression:"setupDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v(" No Varnam Languages Found ")]),n("v-card-text",[t._v("Varnam couldn't find any languages set up. This looks like a first install. Set up languages to use Varnam.")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",text:"",to:"/settings"},on:{click:function(e){t.setupDialog=!1}}},[t._v(" Set Up Languages ")])],1)],1)],1)],1)},O=[],N=(n("99af"),n("c975"),n("baa5"),n("ac1f"),n("466d"),n("498a"),n("2909")),I=1,L=!0,E={UNKNOWN:0,SHIFT:16,CTRL:17,ALT:18,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,SPACE:32},P=[],j=[],F=[];function M(t){var e,n;for(e=t.length;e--;)if(n=t.charCodeAt(e),n>=65&&n<=122)return!0;return!1}var U={name:"Editor",data:function(){return{inputText:"",alternateWords:[]}},computed:{setupDialog:{get:function(){return this.$store.state.setupDialog},set:function(){this.$store.commit("hideSetupDialog")}},lang:function(){return this.$store.state.settings.lang},suggestions:function(){return this.$store.state.suggestions}},methods:{init:function(){var t=this;T=this.$refs.editor.$el.getElementsByTagName("textarea")[0],T.addEventListener("keyup",(function(e){var n=e.altKey||e.metaKey||e.ctrlKey,a=n||e.shiftKey;switch(e.keyCode){case E.UNKNOWN:case E.SHIFT:case E.CTRL:case E.ALT:case E.RETURN:break;case E.TAB:if(!a&&L)break;case E.ESC:break;default:if(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105)break;if(!n){var s=t.getCurrentWordPosition(),r=s[2],o=t.getChunk(s);if(""===o.trim())return void t.$store.commit("hideSuggestions");if(!M(o))return void(t.alternateWords[o]&&t.$store.commit("displaySuggestions",t.alternateWords[o]));o.length>=I&&(j[r]&&j[r].abort(),clearTimeout(P[r]),P[r]=setTimeout((function(){t.transliterate(o,r),delete P[r]}),500)),t.$store.commit("setCurrentWord",r)}break}})),T.addEventListener("keydown",(function(e){var n=e.altKey||e.metaKey||e.ctrlKey||e.shiftKey;if(!n){var a=[E.BACKSPACE,E.DEL,E.LEFT,E.RIGHT,E.UP,E.DOWN,E.SHIFT,E.CTRL];if(-1===a.indexOf(e.keyCode)&&!(e.keyCode>=65&&e.keyCode<=90)){var s=t.getCurrentWordPosition(),r=s[2],o=t.getChunk(s);if(e.keyCode>=48&&e.keyCode<=57){var i=e.keyCode-48;t.chooseSuggestion(i,s)&&e.preventDefault()}else M(o)&&(t.suggestions[r]&&t.suggestions[r][0]===o?t.replaceWord(s,t.suggestions[r],1):t.replaceWordOnSuggestion(s));localStorage["varnam-input"]=T.value}}})),T.addEventListener("click",(function(){var e=t.getCurrentWordPosition(),n=t.getChunk(e);t.alternateWords[n]&&t.$store.commit("displaySuggestions",t.alternateWords[n])})),this.$store.subscribe((function(e){"chooseSuggestion"===e.type&&t.chooseSuggestion(e.payload)})),this.$VARNAM_OFFLINE||(this.$VARNAM_IDB.fetchWords(),this.$store.subscribe((function(e){"updateSettings"===e.type&&t.$VARNAM_IDB.fetchWords()})))},getChunk:function(t){var e=T.value,n=t[0],a=t[1];return e.substr(n,a-n)},replaceWordOnSuggestion:function(t){var e=t[2];F[e]=t},replaceWord:function(t,e,n){var a=this,s=t[0],r=t[1],o=t[2],i=e[n],l=this.inputText,c=T.selectionEnd;this.inputText=l.substring(0,s)+i+l.substr(r,l.length);var d=i.length-(r-s);this.$nextTick((function(){a.setCursorPosition(c+d)})),this.alternateWords[i]=e,this.$store.commit("clearSuggestions",o)},setCursorPosition:function(t){if(T.setSelectionRange)T.setSelectionRange(t,t);else if(T.createTextRange){var e=T.createTextRange();e.collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select()}},showCachedSuggestions:function(t,e){return"undefined"!==typeof this.cachedSuggestions[t]&&(this.onSuggestionsReceive(t,e,this.cachedSuggestions[t]),!0)},getCurrentWordPosition:function(){var t,e,n,a=[" ","\n","\r","\t",",","."],s=this.inputText,r=T.selectionEnd,o=s.substr(0,r),i=-1;for(t=0;t<a.length;t++)e=a[t],n=o.lastIndexOf(e),n>i&&(i=n);while(r<s.length){if(-1!==a.indexOf(s[r]))break;++r}var l=0,c=o.match(/\S+/gi);return c&&(l=c.length-1),i<0?[0,r,l]:[i+1,r,l]},transliterate:function(t,e){var n=this;!this.$VARNAM_OFFLINE&&this.$store.state.idbWords[t]?this.onSuggestionsReceive(t,e,[this.$store.state.idbWords[t]]):(j[e]=new AbortController,this.$store.commit("requestSend"),fetch(this.$VARNAM_API_URL+"/tl/".concat(this.lang,"/").concat(t),{signal:j[e].signal}).then((function(t){return t.json()})).then((function(a){n.onSuggestionsReceive(t,e,a.result),delete j[e]})))},onSuggestionsReceive:function(t,e,n){this.$store.commit("setSuggestions",{id:e,word:t,suggestions:n});var a=[t].concat(Object(N["a"])(n));if(this.$store.commit("displaySuggestions",a),F[e]){var s=F[e];this.getChunk(s)===t&&this.replaceWord(s,a,1),delete F[e]}},chooseSuggestion:function(t,e){e||(e=this.getCurrentWordPosition());var n=e[2],a=this.getChunk(e),s=[];return this.suggestions[n]?s=this.suggestions[n]:this.alternateWords[a]&&(s=this.alternateWords[a]),!!s[t]&&(this.replaceWord(e,s,t),!0)}},mounted:function(){this.init()}},B=U,K=n("b0af"),z=n("99d9"),J=n("169a"),q=n("a844"),H=Object(d["a"])(B,R,O,!1,null,null,null),G=H.exports;f()(H,{VBtn:g["a"],VCard:K["a"],VCardActions:z["a"],VCardText:z["c"],VCardTitle:z["d"],VDialog:J["a"],VSpacer:b["a"],VTextarea:q["a"]});var Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{outlined:"",loading:t.loading}},[n("v-card-title",{staticClass:"title"},[t._v("Word Suggestions")]),n("v-card-text",{staticClass:"suggestions"},[n("v-skeleton-loader",{directives:[{name:"show",rawName:"v-show",value:t.placeholder,expression:"placeholder"}],attrs:{boilerplate:!0,tile:!0}},[n("v-card",{staticClass:"word-card d-flex align-center",attrs:{outlined:""}},[n("v-btn",{staticClass:"sug-id",attrs:{depressed:"",color:"primary"}},[t._v("1")]),n("div",{staticClass:"flex-grow-1 sug-word v-skeleton-loader__bone v-skeleton-loader__list-item-avatar"},[n("div",{staticClass:"v-skeleton-loader__text v-skeleton-loader__bone"})])],1)],1),t._l(t.$store.state.suggestionsDisplay,(function(e,a){return n("div",{key:e.key},[n("v-card",{staticClass:"word-card d-flex align-center",attrs:{outlined:""}},[n("v-btn",{staticClass:"sug-id",attrs:{depressed:"",color:"primary"},on:{click:function(e){return t.chooseSuggestion(a)}}},[t._v(t._s(a))]),n("div",{staticClass:"sug-word v-skeleton-loader__list-item-avatar"},[t._v(t._s(e))])],1)],1)}))],2),n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{attrs:{depressed:"",color:"primary",to:"/settings?tab=words"}},[n("v-icon",[t._v("mdi-plus")]),t._v(" Add Word ")],1)],1)],1)},X=[],Y={name:"SuggestionsPanel",data:function(){return{placeholder:!0,loading:!1}},methods:{chooseSuggestion:function(t){this.$store.commit("chooseSuggestion",t)}},mounted:function(){var t=this;this.$store.subscribe((function(e){"requestSend"===e.type?t.loading=!0:"displaySuggestions"===e.type?(t.placeholder=!1,t.loading=!1):"hideSuggestions"===e.type&&(t.placeholder=!0,t.loading=!1)}))}},Z=Y,tt=(n("480c"),n("3129")),et=Object(d["a"])(Z,Q,X,!1,null,"826b2be8",null),nt=et.exports;f()(et,{VBtn:g["a"],VCard:K["a"],VCardActions:z["a"],VCardText:z["c"],VCardTitle:z["d"],VIcon:p["a"],VSkeletonLoader:tt["a"]});var at={name:"Home",components:{Editor:G,SuggestionsPanel:nt}},st=at,rt=n("a523"),ot=Object(d["a"])(st,D,W,!1,null,"68fff75a",null),it=ot.exports;f()(ot,{VCol:v["a"],VContainer:rt["a"],VRow:h["a"]});var lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-layout",{staticClass:"d-flex justify-center",attrs:{row:""}},[n("v-flex",{attrs:{xs11:"",xl6:""}},[n("v-tabs",{attrs:{grow:!0},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tabs-slider"),n("v-tab",{attrs:{href:"#editor"}},[n("v-icon",[t._v("lead-pencil")]),t._v(" Editor ")],1),n("v-tab",{attrs:{href:"#words"}},[n("v-icon",[t._v("lead-pencil")]),t._v(" Words ")],1),n("v-tab-item",{attrs:{value:"editor"}},[n("EditorSettings"),t.$VARNAM_OFFLINE?n("LanguageDownload"):t._e()],1),n("v-tab-item",{attrs:{value:"words"}},[t.$VARNAM_OFFLINE?n("div",[n("AddWordsOffline")],1):n("div",[n("v-tabs",{attrs:{vertical:!0},model:{value:t.vtab,callback:function(e){t.vtab=e},expression:"vtab"}},[n("v-tab",{attrs:{href:"#offline"}},[t._v("Offline")]),n("v-tab",{attrs:{href:"#online"}},[t._v("Online")]),n("v-tab-item",{attrs:{value:"offline"}},[n("v-card",{attrs:{flat:"",tile:""}},[n("v-card-text",[n("AddWordsOffline")],1)],1)],1),n("v-tab-item",{attrs:{value:"online"}},[n("v-card",{attrs:{flat:"",tile:""}},[n("v-card-text",[n("AddWordsOnline")],1)],1)],1)],1)],1)])],1)],1)],1)],1)},ct=[],dt=(n("5319"),n("5530")),ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("AddWordForm",{on:{addWord:t.addWord}}),n("v-data-table",{staticClass:"text-h4",attrs:{headers:t.headers,items:t.words,"sort-by":"votes","sort-desc":""},on:{"update:items":function(e){t.words=e}},scopedSlots:t._u([{key:"item.action",fn:function(e){var a=e.item;return[n("v-btn",{attrs:{depressed:"",color:a.voted?"primary":"",title:"Vote","aria-label":"Vote suggestion"},on:{click:function(e){return t.vote(a._id)}}},[n("v-icon",[t._v("mdi-arrow-up-box")]),t._v(" "+t._s(a.votes)+" ")],1)]}}])}),n("v-snackbar",{attrs:{right:!0},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{color:"secondary",text:""},on:{click:function(e){t.snackbarDisplay=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarDisplay,callback:function(e){t.snackbarDisplay=e},expression:"snackbarDisplay"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},ft=[],gt=(n("7db0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"addwords"},[n("v-form",[n("v-row",{attrs:{cols:"12",md:"4",align:"center"}},[n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Word (in "+t.langName+")","hide-details":!0,outlined:"",color:"primary"},model:{value:t.word,callback:function(e){t.word=e},expression:"word"}})],1),n("v-col",{attrs:{cols:"5"}},[n("v-text-field",{attrs:{label:"Pattern","hide-details":!0,outlined:"",color:"primary"},model:{value:t.pattern,callback:function(e){t.pattern=e},expression:"pattern"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-btn",{attrs:{large:"",color:"primary"},on:{click:t.addWord}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Add Word ")],1)],1)],1)],1)],1)}),vt=[],pt={name:"AddWordsForm",data:function(){return{word:"",pattern:""}},computed:{langName:function(){var t=this,e=this.$store.state.langs.find((function(e){return e.Identifier===t.$store.state.settings.lang}));return e?e.DisplayName:""}},methods:{addWord:function(){this.$emit("addWord",{word:this.word,pattern:this.pattern})}}},ht=pt,mt=n("4bd4"),bt=n("8654"),yt=Object(d["a"])(ht,gt,vt,!1,null,null,null),wt=yt.exports;f()(yt,{VBtn:g["a"],VCol:v["a"],VForm:mt["a"],VIcon:p["a"],VRow:h["a"],VTextField:bt["a"]});var _t={name:"AddWordsOnline",components:{AddWordForm:wt},data:function(){return{snackbarDisplay:!1,snackbarText:!1,headers:[{text:"",sortable:!1,value:"action",width:10},{text:"Word",sortable:!0,value:"word"},{text:"Pattern",sortable:!0,value:"pattern"}],words:[]}},methods:{init:function(){var t=this;fetch(this.$VARNAM_REVIEW_URL+"/suggestions?lang="+this.$store.state.settings.lang).then((function(t){return t.json()})).then((function(e){t.words=e}))},addWord:function(t){var e=this;t.lang=this.$store.state.settings.lang,fetch(this.$VARNAM_REVIEW_URL+"/suggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){e.snackbarText="Suggestion was addedd successfully",e.snackbarDisplay=!0,e.init()}))},vote:function(t){var e=this.words.find((function(e){return e._id===t}));fetch(this.$VARNAM_REVIEW_URL+"/suggestions/vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sid:t})}).then((function(t){return t.json()})).then((function(t){"voted"===t.message?(e.voted=!1,e.votes--):"success"===t.message&&(e.voted=!0,e.votes++)}))}},mounted:function(){var t=this;this.init(),this.$store.subscribe((function(e){"updateSettings"===e.type&&t.init()}))}},kt=_t,xt=n("8fea"),St=n("2db4"),Vt=Object(d["a"])(kt,ut,ft,!1,null,null,null),At=Vt.exports;f()(Vt,{VBtn:g["a"],VDataTable:xt["a"],VIcon:p["a"],VSnackbar:St["a"]});var Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.$VARNAM_OFFLINE?n("div",[n("v-card",{attrs:{rounded:"",outlined:""}},[n("v-card-title",[t._v("Learn Word")]),n("v-card-subtitle",[t._v("Varnam will learn this word, make different patterns from it.")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Word to learn (in "+t.langName+")","hide-details":!0,outlined:"",clearable:""},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n("v-btn",{staticStyle:{top:"-12px"},attrs:{large:"",color:"primary"},on:{click:t.learnWord}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-teach")]),t._v(" Learn Word ")],1)]},proxy:!0}],null,!1,2016219063),model:{value:t.wordToLearn,callback:function(e){t.wordToLearn=e},expression:"wordToLearn"}})],1)],1),n("v-card",{attrs:{rounded:"",outlined:""}},[n("v-card-title",[t._v("Train Word")]),n("v-card-subtitle",[t._v("Ask Varnam to use a particular pattern for a word.")]),n("v-card-text",[n("AddWordForm",{on:{addWord:t.addWord}})],1)],1),n("v-card",{attrs:{rounded:"",outlined:""}},[n("v-card-title",[t._v("Delete Word")]),n("v-card-subtitle",[t._v("Varnam will delete this word and all patterns associated with it.")]),n("v-card-text",[n("v-row",{attrs:{cols:"12",align:"center"}},[n("v-col",{attrs:{cols:"9"}},[n("v-text-field",{attrs:{label:"Word to delete (in "+t.langName+")","hide-details":!0,outlined:""},model:{value:t.wordToDelete,callback:function(e){t.wordToDelete=e},expression:"wordToDelete"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-btn",{attrs:{large:"",color:"error"},on:{click:function(e){return t.deleteWord()}}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-minus")]),t._v(" Delete Word ")],1)],1)],1)],1)],1)],1):n("div",[n("AddWordForm",{on:{addWord:t.addWord}}),n("v-data-table",{attrs:{headers:t.headers,items:t.words,"items-per-page":5,"sort-by":"votes","sort-desc":""},on:{"update:items":function(e){t.words=e}},scopedSlots:t._u([{key:"item.action",fn:function(e){var a=e.item;return[n("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteWord(a.id)}}},[n("v-icon",[t._v("mdi-delete")])],1)]}}])})],1),n("v-snackbar",{attrs:{right:!0},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{color:"secondary",text:""},on:{click:function(e){t.snackbarDisplay=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarDisplay,callback:function(e){t.snackbarDisplay=e},expression:"snackbarDisplay"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},Tt=[],$t=(n("96cf"),n("1da1")),Dt={name:"AddWordsOffline",components:{AddWordForm:wt},computed:{langName:function(){var t=this,e=this.$store.state.langs.find((function(e){return e.Identifier===t.$store.state.settings.lang}));return e?e.DisplayName:""}},data:function(){return{snackbarDisplay:!1,snackbarText:!1,wordToLearn:"",wordToDelete:"",headers:[{text:"",sortable:!1,value:"action",width:10},{text:"Word",sortable:!0,value:"word"},{text:"Pattern",sortable:!0,value:"pattern"}],words:[]}},methods:{init:function(){var t=this;this.$VARNAM_OFFLINE||this.$VARNAM_IDB.getWordsStore().then((function(e){e.getAll().onsuccess=function(e){t.words=e.target.result}}))},learnWord:function(){var t=this,e=this.wordToLearn.trim();""===e&&(this.snackbarText="Some inputs were empty",this.snackbarDisplay=!0),fetch(this.$VARNAM_API_URL+"/learn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lang:this.$store.state.settings.lang,text:e})}).then((function(n){200===n.status&&(t.snackbarText='Succesfully learnt word "'.concat(e,'"'),t.snackbarDisplay=!0,t.wordToLearn="")}))},addWord:function(t){var e=this;""!==t.pattern.trim()&&""!==t.word.trim()||(this.snackbarText="Some inputs were empty",this.snackbarDisplay=!0),this.$VARNAM_OFFLINE?fetch(this.$VARNAM_API_URL+"/train/"+this.$store.state.settings.lang,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pattern:t.pattern,word:t.word})}).then((function(n){200===n.status&&(e.snackbarText='Succesfully trained "'.concat(t.pattern,'" => "').concat(t.word,'"'),e.snackbarDisplay=!0,e.wordToLearn="")})):this.$VARNAM_IDB.getWordsStore().then((function(n){var a=n.add(t);a.onsuccess=function(){e.snackbarText="Word was addedd successfully",e.snackbarDisplay=!0,e.init()},a.onerror=function(t){console.log(t)}}))},deleteWord:function(t){var e=this;this.$VARNAM_OFFLINE?fetch(this.$VARNAM_API_URL+"/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lang:this.$store.state.settings.lang,word:this.wordToDelete})}).then(function(){var t=Object($t["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200!==n.status){t.next=6;break}e.snackbarText='Succesfully deleted word "'.concat(e.wordToDelete,'"'),e.snackbarDisplay=!0,e.wordToLearn="",t.next=11;break;case 6:return t.next=8,n.json();case 8:n=t.sent,e.snackbarText="Error: ".concat(n.message),e.snackbarDisplay=!0;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.$VARNAM_IDB.getWordsStore().then((function(n){n.delete(t),e.init()}))}},mounted:function(){this.init()}},Wt=Dt,Rt=Object(d["a"])(Wt,Ct,Tt,!1,null,null,null),Ot=Rt.exports;f()(Rt,{VBtn:g["a"],VCard:K["a"],VCardSubtitle:z["b"],VCardText:z["c"],VCardTitle:z["d"],VCol:v["a"],VDataTable:xt["a"],VIcon:p["a"],VRow:h["a"],VSnackbar:St["a"],VTextField:bt["a"]});var Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",{attrs:{flat:"",tile:""}},[n("v-card-title",[t._v("Editor")]),n("v-card-text",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{l:"6"}},[n("v-text-field",{attrs:{type:"number",label:"Font Size",outlined:"","hide-details":!0},model:{value:t.fontSize,callback:function(e){t.fontSize=e},expression:"fontSize"}})],1),n("v-col",{attrs:{l:"6"}},[n("v-select",{attrs:{items:[{text:"Left",value:"left"},{text:"Right",value:"right"}],label:"Suggestions Panel Position",outlined:"","hide-details":!0},model:{value:t.suggestionsPanelPosition,callback:function(e){t.suggestionsPanelPosition=e},expression:"suggestionsPanelPosition"}})],1)],1)],1)],1)],1)},It=[],Lt={name:"EditorSettings",data:function(){return{}},computed:{fontSize:{get:function(){return this.$store.state.settings.fontSize},set:function(t){this.$store.commit("updateSettings",{fontSize:t})}},suggestionsPanelPosition:{get:function(){return this.$store.state.settings.suggestionsPanelPosition},set:function(t){this.$store.commit("updateSettings",{suggestionsPanelPosition:t})}}},methods:{init:function(){}},mounted:function(){this.init()}},Et=Lt,Pt=Object(d["a"])(Et,Nt,It,!1,null,null,null),jt=Pt.exports;f()(Pt,{VCard:K["a"],VCardText:z["c"],VCardTitle:z["d"],VCol:v["a"],VRow:h["a"],VSelect:m["a"],VTextField:bt["a"]});var Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",{attrs:{flat:"",tile:""}},[n("v-card-title",[t._v("Languages")]),n("v-card-actions",[n("p",[t._v("Choose languages you want and click Download")]),n("v-spacer"),n("v-btn",{attrs:{depressed:"",color:"primary",disabled:t.downloadBtnDisabled,title:"Download & Import","aria-label":"Download & Import"},on:{click:t.download}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-arrow-down-box")]),t._v(" Download ")],1)],1),n("v-card-text",[n("v-data-table",{attrs:{headers:t.headers,items:t.langs,"sort-by":"DisplayName","item-key":"Identifier","show-select":"","items-per-page":20},on:{"update:items":function(e){t.langs=e}},scopedSlots:t._u([{key:"item.installed",fn:function(e){var a=e.item;return[t.langsInstalled.find((function(t){return t.Identifier===a.Identifier}))?n("div",[n("v-icon",{attrs:{color:t.langsDownloadable.indexOf(a.Identifier)>-1?"warning":"success",title:"Installed","aria-label":"Installed"}},[t._v("mdi-checkbox-blank-circle")]),t._v(" "+t._s(t.langsInstalled.find((function(t){return t.Identifier===a.Identifier})).CompiledDate.split(" ")[0])+" ")],1):t._e()]}}]),model:{value:t.selectedLangs,callback:function(e){t.selectedLangs=e},expression:"selectedLangs"}})],1)],1),n("v-snackbar",{attrs:{right:!0},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{color:t.snackbarColor,text:""},on:{click:function(e){t.snackbarDisplay=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarDisplay,callback:function(e){t.snackbarDisplay=e},expression:"snackbarDisplay"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},Mt=[],Ut=(n("4de4"),n("13d5"),{name:"LanguageDownload",computed:{downloadBtnDisabled:function(){var t=this;return!this.selectedLangs.find((function(e){return t.langsDownloadable.indexOf(e.Identifier)>-1}))},upstreamURL:function(){return this.$store.state.upstreamURL},langsInstalled:function(){return this.$store.state.langs},langsDownloadable:function(){var t=this,e=this.langs.filter((function(e){var n=t.langsInstalled.find((function(t){return t.Identifier===e.Identifier}));return!n||e.CompiledDate>n.CompiledDate}));return e.reduce((function(t,e){return t.concat(e.Identifier)}),[])}},data:function(){return{snackbarColor:"secondary",snackbarDisplay:!1,snackbarText:!1,headers:[{text:"Name",value:"DisplayName"},{text:"Author",value:"Author"},{text:"Updated",value:"CompiledDate"},{text:"Installed",value:"installed"}],langs:[],selectedLangs:[]}},methods:{init:function(){var t=this;window.fetch(this.upstreamURL+"/languages").then((function(t){return t.json()})).then((function(e){t.langs=e}))},download:function(){var t=this,e=this.selectedLangs.filter((function(e){return t.langsDownloadable.indexOf(e.Identifier)>-1}));e=e.reduce((function(t,e){return t.concat(e.Identifier)}),[]);var n=0;e.forEach((function(a){window.fetch(t.$VARNAM_API_URL+"/download-language",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lang:a})}).then((function(s){200===s.status?++n===e.length?(t.snackbarColor="secondary",t.snackbarText="All selected languages downloaded. Restart app for changes to take effect.",t.snackbarDisplay=!0):(t.snackbarColor="secondary",t.snackbarText="Language '".concat(a,"' downloaded"),t.snackbarDisplay=!0):s.json().then((function(e){t.snackbarColor="error",t.snackbarText=e.message,t.snackbarDisplay=!0}))}))}))}},created:function(){var t=this;this.init(),this.$store.subscribe((function(e){"setUpstream"===e.type&&t.init()}))}}),Bt=Ut,Kt=Object(d["a"])(Bt,Ft,Mt,!1,null,null,null),zt=Kt.exports;f()(Kt,{VBtn:g["a"],VCard:K["a"],VCardActions:z["a"],VCardText:z["c"],VCardTitle:z["d"],VDataTable:xt["a"],VIcon:p["a"],VSnackbar:St["a"],VSpacer:b["a"]});var Jt={name:"Settings",components:{AddWordsOnline:At,AddWordsOffline:Ot,EditorSettings:jt,LanguageDownload:zt},computed:{tab:{set:function(t){this.$router.replace({query:Object(dt["a"])(Object(dt["a"])({},this.$route.query),{},{tab:t})})},get:function(){return this.$route.query.tab}},vtab:{set:function(t){this.$router.replace({query:Object(dt["a"])(Object(dt["a"])({},this.$route.query),{},{vtab:t})})},get:function(){return this.$route.query.vtab}}}},qt=Jt,Ht=n("0e8f"),Gt=n("a722"),Qt=n("71a3"),Xt=n("c671"),Yt=n("fe57"),Zt=n("9a96"),te=Object(d["a"])(qt,lt,ct,!1,null,null,null),ee=te.exports;f()(te,{VCard:K["a"],VCardText:z["c"],VContainer:rt["a"],VFlex:Ht["a"],VIcon:p["a"],VLayout:Gt["a"],VTab:Qt["a"],VTabItem:Xt["a"],VTabs:Yt["a"],VTabsSlider:Zt["a"]}),a["a"].use($["a"]);var ne=[{path:"/",name:"Home",component:it},{path:"/settings",name:"Settings",component:ee}],ae=new $["a"]({routes:ne}),se=ae,re=n("2f62");a["a"].use(re["a"]);var oe=new re["a"].Store({state:{currentWord:0,setupDialog:!1,langs:[],upstreamURL:"",suggestionsDisplay:[],suggestions:{},alternateWords:{},settings:{lang:"ml",fontSize:14,suggestionsPanelPosition:"right"},idbWords:{}},mutations:{initSettings:function(t){var e=window.localStorage.getItem("varnam-settings");e&&(e=JSON.parse(e),t.settings=Object.assign({},t.settings,e))},updateSettings:function(t,e){a["a"].set(t,"settings",Object(dt["a"])(Object(dt["a"])({},t.settings),e)),window.localStorage.setItem("varnam-settings",JSON.stringify(t.settings))},setCurrentWord:function(t,e){t.currentWord=e},setSuggestions:function(t,e){a["a"].set(t.suggestions,e.id,[e.word].concat(Object(N["a"])(e.suggestions)))},clearSuggestions:function(t,e){a["a"].delete(t.suggestions,e)},displaySuggestions:function(t,e){t.suggestionsDisplay=e},hideSuggestions:function(t){t.suggestionsDisplay=[]},setLangs:function(t,e){e.sort((function(t,e){return t.Identifier.localeCompare(e.Identifier)})),t.langs=e,0===e.length&&(t.setupDialog=!0)},setUpstream:function(t,e){t.upstreamURL=e},setIDBWords:function(t,e){var n={};e.forEach((function(t){n[t.pattern]=t.word})),t.idbWords=n},hideSetupDialog:function(t){t.setupDialog=!1},requestSend:function(){},chooseSuggestion:function(){}},actions:{},modules:{}}),ie=n("f309");a["a"].use(ie["a"]);var le=new ie["a"]({theme:{themes:{light:{primary:"#4c5df5",secondary:"#00bcd4",accent:"#03a9f4",error:"#e91e63",warning:"#ffc107",info:"#2196f3",success:"#4caf50"}}}});a["a"].config.productionTip=!1,window.$VARNAM_OFFLINE=!1,window.$VARNAM_API_URL="https://api.varnamproject.com",window.$VARNAM_REVIEW_URL="https://kde.smc.org.in:8124",a["a"].prototype.$VARNAM_OFFLINE=window.$VARNAM_OFFLINE,a["a"].prototype.$VARNAM_API_URL=window.$VARNAM_API_URL,a["a"].prototype.$VARNAM_REVIEW_URL=window.$VARNAM_REVIEW_URL,window.fetch(window.$VARNAM_API_URL+"/languages").then((function(t){return t.json()})).then((function(t){oe.commit("setLangs",t)})),oe.commit("initSettings"),window.$VARNAM_OFFLINE&&window.fetch(window.$VARNAM_API_URL+"/get/upstream-url").then((function(t){return t.text()})).then((function(t){oe.commit("setUpstream",t)}));var ce=1;a["a"].prototype.$VARNAM_IDB={getDB:function(){return new Promise((function(t){var e=window.indexedDB.open("varnam-"+oe.state.settings.lang,ce);e.onupgradeneeded=function(t){var n=e.result;switch(t.oldVersion){case 0:n.createObjectStore("words",{keyPath:"id",autoIncrement:!0});break;case 1:}},e.onerror=function(){console.error("IndexedDB Error",e.error)},e.onsuccess=function(e){var n=e.target.result;t(n),n.onversionchange=function(){n.close(),window.alert("Database is outdated, please reload the page.")}}}))},getWordsStore:function(){var t=this;return new Promise((function(e){return t.getDB().then((function(t){var n=t.transaction("words","readwrite"),a=n.objectStore("words");e(a),t.close()}))}))},fetchWords:function(){this.getWordsStore().then((function(t){t.getAll().onsuccess=function(t){oe.commit("setIDBWords",t.target.result)}}))}},new a["a"]({router:se,store:oe,vuetify:le,render:function(t){return t(C)}}).$mount("#app")},"85ec":function(t,e,n){},a180:function(t,e,n){}});
//# sourceMappingURL=app.c7bcdd99.js.map